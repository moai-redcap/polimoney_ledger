# Polimoney Ledger 開発ワークフローガイド

このドキュメントは、このプロジェクトにおけるAIアシスタントとの共同開発の進め方と、確立されたルールをまとめたものです。

## 1. 基本的な考え方

このプロジェクトは、開発者と、IDE内で動作するAIアシスタントとのペアプログラミングによって進められます。AI
アシスタントはコードの生成と修正を担当し、開発者は指示、レビュー、そしてコードの実行を担当します。

## 2. 設計方針の共有 (MCPサーバ)

プロジェクトの重要な決定事項やアーキテクチャは、リポジトリのルートにある `DESIGN_DOC.md` に記録されています。

- **AIへの指示:** AIが方針と異なる提案をした場合や、方針を忘れているように見える場合は、「
  `DESIGN_DOC.md`を思い出してください」と指示してください。
- **方針の更新:** 新しい設計上の決定が行われた場合は、必ずこのドキュメントを更新してください。

## 3. 外部知識ベース (RAGシステム)

`DESIGN_DOC.md`の内容は、`rag_scripts`
ディレクトリにあるPythonスクリプト群によって、Supabase上のベクトルデータベースに保存されています。これはプロジェクトの「外部記憶装置（MCPサーバ）」として機能します。

- **知識ベースの更新:**
    - `DESIGN_DOC.md`を更新した後は、必ずターミナルで以下のコマンドを実行し、知識ベースを同期してください。
    - `python rag_scripts/update_knowledge_base.py`

- **知識ベースへの問い合わせ:**
    - プロジェクトの方針について不明な点があれば、ターミナルで以下のコマンドを実行して質問できます。
    - `python rag_scripts/query_knowledge_base.py "ここに質問を入力"`

## 4. Issue駆動開発の進め方

GitHub Issueに基づいた開発を行う際は、以下の手順を踏みます。

1. **Issueのファイル化:**
    - 作業したいIssueの内容（タイトル、本文など）をコピーします。
    - `.github/ISSUES/ISSUE-XX-short-description.md` のような名前でファイルを作成し、内容を貼り付けます。

2. **AIへの作業指示:**
    - AIアシスタントに、「`.github/ISSUES/ISSUE-XX.md` を読んで作業を開始してください」と指示します。

## 5. AIアシスタントの制約事項

- AIアシスタントは、`git`コマンドやファイルの読み書きなど、提供されたツールしか実行できません。
- ターミナルコマンドの実行 (`flutter run`, `python` スクリプトの実行など) は、開発者が行う必要があります。
- AIアシスタントはインターネットに直接アクセスできないため、GitHubのIssueを直接読むことはできません。

---
このガイドは、プロジェクトの進行に合わせて適宜更新してください。
